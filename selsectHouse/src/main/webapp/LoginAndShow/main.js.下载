var tzdjts = "  <div style=\"padding:20px 40px;\" id=\"cxdiv\" >"
                 + " <div  class=\"mag_tb mag_t30\" style=\"min-height:160px;\">"
                       + "<div class=\"fL mag_l20\"><img src=\"resources/images/giveup.png\"/></div>"
                       + "<div class=\"fR size16 lh_30\" style=\"width:360px;\">"
                           + "请在每日{#daydj_kssj}:00至{#daydj_jssj}:00进行意向登记申请！"
                       + "</div><div class=\"clear\"></div>"
                 + " </div>"
                 + " <div class=\"tc windowBtn\">"
                       +"<span class=\"isInlineblock bgE05262 color_white size16 lh_40\" style=\"width:120px;\" onclick=\"layer.closeAll()\">确定</span>"
                 + "</div>"
              + "</div>";

var djtTemplete = ""
        +"<div class=\"jtcyxx bs prel pad_20 mag_t40 \">"
            + "<div class=\"floatTitle size16 jtzTitle\" data-jtzxh =\"{jtzTitle1}\" >第<font class=\"color_e34156\">{jtzTitle}</font>组家庭</div>"
        +"<div class=\"scjtDiv\" onclick=\"scJt(this)\" >删除家庭</div>"
        +"<div class=\"jtzDiv\">"
                +"<table class=\"jtcy_xx\">"
                    +"<tr height=\"40\">"
                        +"<th class=\"bgf2f2f2\" width=\"124\" >姓名</th>"
                        +"<th class=\"bgf2f2f2\" width=\"124\" >家庭关系</th>"
                        +"<th class=\"bgf2f2f2\" width=\"124\" >户口类型</th>"
                        +"<th class=\"bgf2f2f2\" width=\"124\" >证件类型</th>"
                        +"<th class=\"bgf2f2f2\" width=\"200\" >证件号码</th>"
                        +"<th class=\"bgf2f2f2\" width=\"100\" >是否购房人</th>"
                        +"<th class=\"bgf2f2f2\" width=\"124\" >户籍登记日期</th>"
                        +"<th class=\"bgf2f2f2\" width=\"124\" >外市迁入</th>"
                        +"<th class=\"bgf2f2f2\" width=\"100\" >操作</th>"
                    +"</tr>"

                    +"<tr height=\"40\" class=\"trJtcy\">"
                        +"<td align=\"center\">"
                            + "<input class=\"bs txtXm\" type=\"text\" data-jtz=\"{jtzgs}\" data-reg=\"NameReg\" placeholder=\"请输入姓名\"  value=\"\"/></td>"
                        +"<td>"
                            +"<div class=\"gfjtTYpe_S\">"
                                +"<div class=\"downSearch\">"
                                    +"<span class=\"spanGx\" data-value=\"00\">请选择</span>"
                                    +"<div class=\"arrow\">"
                                        +"<img src=\"resources/images/drapdown_arrow.png\" class=\"changeArrow2\"/>"
                                    +"</div>"
                                    + "<ul class=\"areaList downList gxlxdl\" style=\"overflow: hidden; display: none;\">"
                                     + "<li class=\"textOverflow\" data-value=\"01\">配偶</li>"
                                    + "<li class=\"textOverflow\" data-value=\"02\">未成年子女</li>"
                                    + "<li class=\"textOverflow\" data-value=\"05\">单身</li>"
                                    +"</ul>"
                                +"</div>"
                            +"</div>"
                        +"</td>"
                        +"<td>"
                            +"<div class=\"gfjtTYpe_S\">"
                                +"<div class=\"downSearch\">"
                                    +"<span class=\"spanHk\" data-value=\"00\" >请选择</span>"
                                    +"<div class=\"arrow\">"
                                        +"<img src=\"resources/images/drapdown_arrow.png\" class=\"changeArrow2\"/>"
                                    +"</div>"
                                    +"<ul class=\"areaList downList\" style=\"overflow: hidden; display: none;\">"
                                        +"<li class=\"textOverflow\" data-value=\"01\">本市户口</li>"
                                        +"<li class=\"textOverflow\" data-value=\"02\">非本市户口</li>"
                                    +"</ul>"
                                +"</div>"
                            +"</div>"
                        +"</td>"
                        +"<td>"
                            +"<div class=\"gfjtTYpe_S\">"
                                +"<div class=\"downSearch\">"
                                    +"<span class=\"spanZjlx\" data-value=\"00\" >请选择</span>"
                                    +"<div class=\"arrow\">"
                                        +"<img src=\"resources/images/drapdown_arrow.png\" class=\"changeArrow2\" />"
                                    +"</div>"
                                    + "<ul class=\"areaList downList zjlxdl\" style=\"overflow: hidden; display: none;\">"
                                     + "<li class=\"textOverflow\" data-value=\"10\">身份证</li>"
                                    + "<li class=\"textOverflow\" data-value=\"30\">军官证</li>"
                                    + "<li class=\"textOverflow\" data-value=\"30\">文职证</li>"
                                    + "<li class=\"textOverflow\" data-value=\"70\">护照</li>"
                                    + "<li class=\"textOverflow\" data-value=\"90\">其他证件</li>"
                                    +"</ul>"
                                +"</div>"
                            +"</div>"
                        +"</td>"
                        +"<td>"
                            +"<input class=\"bs txtZjhm\" data-repeat=\"repeat\" data-reg=\"zjNumReg\" placeholder=\"请输入证件号码\" type=\"text\" name=\"name\" value=\"\" />"
                        +"</td>"
                        +"<td align=\"left\">"
                            +"<div class=\"gfjtTYpe_S\">"
                                +"<div class=\"downSearch\">"
                                    +"<span class=\"spanGfr\" data-value=\"00\" >请选择</span>"
                                    +"<div class=\"arrow\">"
                                        +"<img src=\"resources/images/drapdown_arrow.png\" class=\"changeArrow2\"/>"
                                    +"</div>"
                                    +"<ul class=\"areaList downList\" style=\"overflow: hidden; display: none;\">"
                                    +"<li class=\"textOverflow\" data-value=\"01\" >是</li>"
                                    +"<li class=\"textOverflow\" data-value=\"02\" >否</li>"
                                +"</ul>"
                                +"</div>"
                            +"</div>"
                        +"</td>"
                        +"<td>"
                            +"<input class=\"bs txtHjrq\" type=\"text\" data-reg=\"hjdjrq\" placeholder=\"请输入日期\" value=\"\" /></td>"
                        +"<td>"
                            +"<div class=\"gfjtTYpe_S\">"
                                +"<div class=\"downSearch\">"
                                    +"<span class=\"spanWs\" data-value=\"00\">请选择</span>"
                                    +"<div class=\"arrow\">"
                                        +"<img src=\"resources/images/drapdown_arrow.png\" class=\"changeArrow2\" />"
                                    +"</div>"
                                    +"<ul class=\"areaList downList\" style=\"overflow: hidden; display: none;\">"
                                        +"<li class=\"textOverflow\" data-value=\"01\" >是</li>"
                                        +"<li class=\"textOverflow\" data-value=\"02\" >否</li>"
                                    +"</ul>"
                                +"</div>"
                            +"</div>"
                        +"</td>"
                        +"<td><span onclick='$(this).parent().parent().remove();' class=\"spandel textUnderline color_169BD5 hide\">删除</span></td>"
                        +"</tr>"
                +"</table>"
                
                +"<div class=\"fL size12 color_999999\">"
                + "<p  style=\"font-family:SimSun;line-height:16px;\">1.每组家庭包括夫妻双方及其未成年子女、离异（丧偶）父（母）及其未成年子女，满18周岁以上成年子女、单身以单独家庭申报。<br>2.涉及多个家庭共同购房意向登记的，需添加多组家庭信息。</p>"
                +"</div>"
                +"<div class=\"tr fR\">"
                +"<span class=\"addDiv\" onclick=\"addJtcy(this)\" >添加成员</span>"
                + "</div>"
                +"<div class=\"clear\"></div>"
            +"</div>"
        +"</div>";


var Reg = {
    'phoneReg': /^(((13)|(15)|(18)|(14)|(19)|(17))+\d{9})$/,//手机号码验证
    'telephoneReg': /^((((13)|(15)|(18)|(14)|(19)|(17))+\d{9})|(([0-9]{3,4}-)?[0-9]{7,8}))$/,//电话号码验证
    'VerfyReg': /^[0-9]{4}$/,//数字验证
    'ImgReg': /^[0-9a-zA-Z]{4}$/,//数字验证
    'IDReg': /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x|)$)/,//身份证号验证
    'NameReg': /^[\u2e80-\ufe4f\ufa2d\a-zA-Z_\.·\s+]{2,20}$/, //姓名验证
    'userReg': /^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){2,19}$/,//用户名验证
    'passReg': /^[a-zA-Z0-9.,_]{2,19}$/,//用户名验证
    'NumberReg': /^\d+(\.\d+)?$/,  //数字验证
    'zjNumReg': /^.{5,18}$/,
    'hjszd': /^.{3,50}$/,
    'hjdjrq': /(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))-02-29)/,
    'trim': /(^\s*)|(\s*$)/
};

function goUrl(xurl) {
    if (xurl.length > 2) {
        //if (confirm("即将离开本站，是否继续访问?")) {
            window.open(xurl);
        //}
    }
}

function goUrlTs(xurl) {
    if (xurl.length > 2) {
        if (confirm("即将离开本站，是否继续访问?")) {
            window.open(xurl);
        }
    }
}


function openPage(vURL, vWidth, vHeight, title) {
    layer.open({
        title: false,
        type: 2,
        skin: 'layui-layer-rim', //加上边框
        //area: [vWidth, vHeight], //宽高
        content: vURL
    });
}

function getQuery(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]); return null;
}

//校验有效的身份证号码
function checkPersonalCardId(pId) {
    var ResultMsg = "";
    var arrVerifyCode = [1, 0, "X", 9, 8, 7, 6, 5, 4, 3, 2];
    var Wi = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
    var Checker = [1, 9, 8, 7, 6, 5, 4, 3, 2, 1, 1];
    if (pId.length != 15 && pId.length != 18) {
        ResultMsg = "必须是15位或18位身份证号码！";
        return ResultMsg;
    } else {
        //补全15位身份证为18位后检验前17位是否全部为数字
        var Ai = pId.length == 18 ? pId.substring(0, 17) : pId.slice(0, 6) + "19" + pId.slice(6, 16);
        if (!/^\d+$/.test(Ai)) {
            ResultMsg = "身份证除最后一位外，其余17位必须为数字！";
            return ResultMsg;
        } else {
            //校验年月日是否正确
            var yyyy = Ai.slice(6, 10),
            mm = Ai.slice(10, 12) - 1,
            dd = Ai.slice(12, 14);
            var d = new Date(yyyy, mm, dd),
            year = d.getFullYear(),
            mon = d.getMonth(),
            day = d.getDate(),
            now = new Date();
            if (year != yyyy || mon != mm || day != dd || d > now || now.getFullYear() - year > 140) {
                ResultMsg = "身份证号码格式不正确！";
                return ResultMsg;
            }
            //检查校验码是否正确
            for (var i = 0,
            ret = 0; i < 17; i++) {
                ret += Number(Ai.substr(i, 1)) * Wi[i];
            }
            Ai += arrVerifyCode[(ret % 11)];
            ResultMsg = ((pId.length == 18) && (pId.toLowerCase() != Ai.toLowerCase())) ? "身份证号码格式不正确！" : Ai;
            if (ResultMsg == "身份证号码格式不正确！") {
                return ResultMsg;
            }
            else {
                return true;
            }
        }
    }
}

var vcity = {
    11: "北京", 12: "天津", 13: "河北", 14: "山西", 15: "内蒙古",
    21: "辽宁", 22: "吉林", 23: "黑龙江", 31: "上海", 32: "江苏",
    33: "浙江", 34: "安徽", 35: "福建", 36: "江西", 37: "山东", 41: "河南",
    42: "湖北", 43: "湖南", 44: "广东", 45: "广西", 46: "海南", 50: "重庆",
    51: "四川", 52: "贵州", 53: "云南", 54: "西藏", 61: "陕西", 62: "甘肃",
    63: "青海", 64: "宁夏", 65: "新疆", 71: "台湾", 81: "香港", 82: "澳门", 91: "国外"
};

function checkCode(vcard) {
    var msg = "";
    if (vcard != "") {
        var card = vcard.toUpperCase();
        //校验长度，类型
        if (isCardNo(card) === false) {
            msg = "身份证格式不正确!";
            return msg;
        }
        //检查省份
        if (checkProvince(card) === false) {
            msg = "身份证省份不正确!";
            return msg;
        }
        //校验生日
        if (checkBirthday(card) === false) {
            msg = "身份证生日不正确!";
            return msg;
        }
        //检验位的检测
        if (checkParity(card) === false) {
            msg = "身份证最后一位格式不正确!";
            return msg;
        }
        return true;
    }
    return true;
};
//检查号码是否符合规范，包括长度，类型
isCardNo = function (card) {
    //身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X
    var reg = /(^\d{15}document.getElementById)|(^\d{17}(\d|X)$)/;
    if (reg.test(card) == false) {
        return false;
    }
    return true;
};
//取身份证前两位,校验省份
checkProvince = function (card) {
    var province = card.substr(0, 2);
    if (vcity[province] == undefined) {
        return false;
    }
    return true;
};
//检查生日是否正确
checkBirthday = function (card) {
    var len = card.length;
    //身份证15位时，次序为省（3位）市（3位）年（2位）月（2位）日（2位）校验位（3位），皆为数字
    if (len == '15') {
        var re_fifteen = /^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/;
        var arr_data = card.match(re_fifteen);
        var year = arr_data[2];
        var month = arr_data[3];
        var day = arr_data[4];
        var birthday = new Date('19' + year + '/' + month + '/' + day);
        return verifyBirthday('19' + year, month, day, birthday);
    }
    //身份证18位时，次序为省（3位）市（3位）年（4位）月（2位）日（2位）校验位（4位），校验位末尾可能为X
    if (len == '18') {
        var re_eighteen = /^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/;
        var arr_data = card.match(re_eighteen);
        var year = arr_data[2];
        var month = arr_data[3];
        var day = arr_data[4];
        var birthday = new Date(year + '/' + month + '/' + day);
        return verifyBirthday(year, month, day, birthday);
    }
    return false;
};
//校验日期
verifyBirthday = function (year, month, day, birthday) {
    var now = new Date();
    var now_year = now.getFullYear();
    //年月日是否合理
    if (birthday.getFullYear() == year && (birthday.getMonth() + 1) == month && birthday.getDate() == day) {
        //判断年份的范围（3岁到100岁之间)
        var time = now_year - year;
        if (time >= 0 && time < 150) {
            return true;
        }
        return false;
    }
    return false;
};
//校验位的检测
checkParity = function (card) {
    //15位转18位
    card = changeFivteenToEighteen(card);
    var len = card.length;
    if (len == '18') {
        var arrInt = new Array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2);
        var arrCh = new Array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2');
        var cardTemp = 0, i, valnum;
        for (i = 0; i < 17; i++) {
            cardTemp += card.substr(i, 1) * arrInt[i];
        }
        valnum = arrCh[cardTemp % 11];
        if (valnum == card.substr(17, 1)) {
            return true;
        }
        return false;
    }
    return false;
};
//15位转18位身份证号
changeFivteenToEighteen = function (card) {
    if (card.length == '15') {
        var arrInt = new Array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2);
        var arrCh = new Array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2');
        var cardTemp = 0, i;
        card = card.substr(0, 6) + '19' + card.substr(6, card.length - 6);
        for (i = 0; i < 17; i++) {
            cardTemp += card.substr(i, 1) * arrInt[i];
        }
        card += arrCh[cardTemp % 11];
        return card;
    }
    return card;
};



function time_range(syshour, obj, qy, sjjg) {
    var beginTime = parseInt(sjjg.split('-')[0]);
    var endTime = parseInt(sjjg.split('-')[1]);
    if (syshour >= beginTime && syshour < endTime) {
        window.location.href = "djxz.aspx?qy="+qy+"&yxbh=" + obj;
        return true;
    } else {
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: tzdjts.replace("{#daydj_kssj}", beginTime * 1 > 9 ? beginTime : "0" + beginTime).replace("{#daydj_jssj}", endTime * 1 > 9 ? endTime : "0" + endTime)
        });
        return false;
    }
}



function xmgsload() {
    var state = getQuery("state") == null ? "-1" : getQuery("state");
    $(".xmgs_tab span[data-id='" + state + "']").addClass("xmgsyabHover");
    $('#txtSearch').val(getQuery('key') == null ? "" : unescape(getQuery('key')));
}

function xmgsxaload() {
    var state = getQuery("state") == null ? "-1" : getQuery("state");
    $(".xmgs_tab span[data-id='" + state + "']").addClass("xmgsyabHover");
    $('#txtSearch').val(getQuery('key') == null ? "" : unescape(getQuery('key')));
    $(".xmgs_tab span[data-id='" + state + "']").addClass("xmgsyabHover");
    $('#txtSearch').val(getQuery('key') == null ? "" : unescape(getQuery('key')));
}
function shownewtab(val, qy) {
    location.href = '?state=' + val;
}
function search(s, url2) {
    if (s == 13) {
        var state = getQuery("state") == null ? "-1" : getQuery("state");
        urls = url2 + '?key=' + escape($('#txtSearch').val()) + '&state=' + state;
        window.location.href = urls;
    }
}

function djxzload() {
    $(".xzDdiv").html(data.xz)
    var timer = setInterval(function () {
        var obj = parseInt($(".countNum").text())
        obj--;
        $(".countNum").text(obj);
        if (!obj) {
            $(".agreeDiv").text("我已阅读并知悉");
            $(".agreeDiv").css("cursor", "pointer");
            $(".agreeDiv").css("background", "#D93E52");
            $(".agreeDiv").click(function () {
                var checked = $("[name= 'tyBtn']").attr("checked");
                if (checked) {
                    location.href = "sfrz.aspx?qy=" + getQuery("qy") + "&yxbh=" + getQuery("yxbh");
                } else {

                }
            })
            clearInterval(timer);
        }
    }, 1000)

    $(".checkBox").click(function () {
        if ($(this).attr("checked")) {
            //$(".agreeDiv").css("cursor", "pointer");
            $(".agreeDiv").css("background", "#D93E52");
        } else {
            $(".agreeDiv").css("cursor", "auto");
            $(".agreeDiv").css("background", "#999999");
        }
    })
}

function checkSms() {
    var f = Reg['VerfyReg'].test($('#txtSmsCode').val());
    if (!f) { layer.msg("请输入正确的验证码"); $('#txtSmsCode').focus(); }
    return f;
}

function sfrzload() {
    
    $(".sfrzTipdiv").html(data.sfyztip);
    var msg = $("#hidMsg").val();
    if (msg.substring(0, 1) == "7") {
        $("#txtPassword").val("");
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: false, //点击遮罩关闭
            content: $('.divPassword')
        });
        if (msg != "7,0" && msg.length > 3) {
            layer.msg(msg.substring(2));
        }
    }
    else if (msg == "2") {
        var xmmc = $("#hidXmmc").val();
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 0,
            shadeClose: false, //点击遮罩关闭
            content: '\<\div style="padding:20px 40px;"><div class="mag_tb mag_t30" style="min-height:160px;">'
            + '<div class=fL><img src="resources/images/giveup.png"/></div><div class="fR size18 lh_40"'
            + ' style="width:380px;">您正在意向登记的<span class="weight700 mag_l5 mag_r5 wrap">' + xmmc + '</span>项目选房暂未结束，请在选房结束后再登记其他项目！</div>'
            + '<div class="clear"></div></div><div class="tc windowBtn"><span class="isInlineblock bgE05262 '
            + 'color_white size16 lh_40" style="width:120px;" onclick="layer.close(layer.index)">查看我的登记</span></div>'
            + '\<\/div>',
            end: function () {
                window.location.href = "wdyxdjWaitPass.aspx";
            }
        });
    }
   else if (msg.substring(0, 2) == "-8") {
        $(".spanSjhm").text($("#txtSjhm").val());
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 0,
            shadeClose: false, //点击遮罩关闭
            content: $('.divShyz'),
            end: function () {
                $("#txtSmsCode").val('');
            }

        });
        if (msg != "-8,0" && msg.length > 3) {
            layer.msg(msg.substring(3));
        }
    }
    else if (msg.substring(0, 2) == "-9") {
        layer.msg(msg.substring(3));
    }
    $("#hidMsg").val("");
}

function infoload() {
    var djqxxz = data.qrxx;
    djqxxz = djqxxz.replace("{Clsj}", $("#hidClsj").val());
    djqxxz = djqxxz.replace("{Cldz}", $("#hidCldz").val());
    djqxxz = djqxxz.replace("{yxdjjssj}", $("#hidDjjssj").val());
    djqxxz = djqxxz.replace("{xfjssj}", $("#hidXfjssj").val());
    $(".specialTip").html(djqxxz);
    var msg = $("#hidMsg").val();
    if (msg == "7") {
        layer.close(layer.index);
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: '\<\div style="padding:20px 40px;"><div class="mag_tb mag_t30" style="min-height:160px;">'
            + '<div class=fL><img src="resources/images/giveup.png"/></div><div class="fR size16 lh_30"'
            + ' style="width:380px;">抱歉，您的<span class="weight700 mag_l5 mag_r5 wrap">' + $('#hidXmmc').val() + '</span>'
            + '摇号项目申请信息撤销失败！</div>'
            + '<div class="clear"></div></div><div class="tc windowBtn"><span class="isInlineblock bgE05262 '
            + 'color_white size16 lh_40" style="width:120px;" onclick="layer.close(layer.index)">确定</span></div>'
            + '\<\/div>',
            end: function () {
                window.location.href = 'index.html';
            }
        });
    }
    else if (msg == "88") {
        var sjjg = $("#hidDayDjsj").val();
        var beginTime = parseInt(sjjg.split('-')[0]);
        var endTime = parseInt(sjjg.split('-')[1]);
        var tzdjts1=tzdjts.replace("{#daydj_kssj}", beginTime * 1 > 9 ? beginTime : "0" + beginTime).replace("{#daydj_jssj}", endTime * 1 > 9 ? endTime : "0" + endTime)
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: tzdjts1,
            end: function () {
                window.location.href = "xmgs.aspx";
            }
        });
    }
    else if (msg == "8") {
        layer.close(layer.index);
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: '\<\div style="padding:20px 40px;"><div class="mag_tb mag_t30" style="min-height:160px;">'
            + '<div class=fL><img src="resources/images/success.png"/></div><div class="fR size16 lh_30"'
            + ' style="width:380px;">您的<span class="weight700 mag_l5 mag_r5 wrap">' + $('#hidXmmc').val() + '</span>'
            + '摇号项目申请信息撤销成功！</div>'
            + '<div class="clear"></div></div><div class="tc windowBtn"><span class="isInlineblock bgE05262 '
            + 'color_white size16 lh_40" style="width:120px;" onclick="layer.close(layer.index)">确定</span></div>'
            + '\<\/div>',
            end: function () {
                window.location.href = "index.html";
            }
        });
    }
    else if (msg == "-2") {
        layer.close(layer.index);
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: '\<\div style="padding:20px 40px;"><div class="mag_tb mag_t30" style="min-height:160px;">'
            + '<div class=fL><img src="resources/images/giveup.png"/></div><div class="fR size16 lh_30"'
            + ' style="width:380px;">您已存在有效的申请，如需修改姓名，必须先撤销申请！</div>'
            + '<div class="clear"></div></div><div class="tc windowBtn"><span class="isInlineblock bgE05262 '
            + 'color_white size16 lh_40" style="width:120px;" onclick="layer.close(layer.index)">确定</span></div>'
            + '\<\/div>'
        });
    }
    $("#hidMsg").val('');
    $(".spanJtlx").attr("data-value", $("#hidJtlx").val());
    $(".spanZfqk").attr("data-value", $("#hidZfqk").val());
    var valdz = $(".spanJtlx").attr("data-value");
    if (valdz == "01") {
        $(".spanZfqk").text("无住房");
        $(".spanZfqk").attr('data-value', "无住房");
        $(".spanZfqk").parent(".downSearch5").css({ 'background': '#f0f0f0', 'color': '#444444', 'cursor': 'default' })
    } else {
        $(".spanZfqk").parent(".downSearch5").css({ 'color': '#333333', 'cursor': 'point', 'background': '#ffffff' });
    }

    $('.zjlxdl').html($('.downListZjlx').html());
    $('.gxlxdl').html($('.downListGxlx').html());

    $(".downSearch,.downSearch5").each(function () {
        var val = $(this).find("span").attr("data-value");
        if (val.length > 0 && val != "00") {
            $(this).find("span").text($(this).find(".downList [data-value='" + val + "']").text())
        }
        else {
            $(this).find("span").text("请选择");
        }
        if ($(this).find($(".spanZjlx")).text() == "身份证") {
            $(this).parents("td").next("td").find($(".txtZjhm")).attr("data-reg", "IDReg");
        } else {
            $(this).parents("td").next("td").find($(".txtZjhm")).attr("data-reg", "zjNumReg");
        }
    })

   
    //查询模拟下拉框
    $('.rgdjxxDiv').on('click', (".downSearch>span,.downSearch>.arrow"),
      function (evt) {
          if (evt && evt.stopPropagation) {
              evt.stopPropagation();
          } else {
              evt.cancelBubble = true;
          }
          $(".downList").stop().slideUp(200);
          $(".arrow").find("img").removeClass("changeArrow");
          $(".arrow").find("img").addClass("changeArrow2");

          $(this).parent().find($(".downList")).stop().slideDown(200);
          $(this).parent().find($(".arrow")).find("img").removeClass("changeArrow2");
          $(this).parent().find($(".arrow")).find("img").addClass("changeArrow");
          $(this).parent().find($(".downList")).find("li").on('click', function () {
              $(this).parent(".downList").siblings("span").text($(this).text());
              $(this).parent(".downList").siblings("span").attr('data-value', $(this).attr('data-value'));
              var lassspan = $(this).parent().parent().children("span").attr("class");
              if (lassspan == "spanJtlx") {
                  var vald = $(this).attr('data-value');
                  if (vald == "01") {
                      $(".spanZfqk").text("无住房");
                      $(".spanZfqk").attr('data-value', "无住房");
                      $(".spanZfqk").parent(".downSearch5").css({ 'background': '#f0f0f0', 'color': '#444444', 'cursor': 'default' })
                  } else {
                      $(".spanZfqk").parent(".downSearch5").css({ 'color': '#333333', 'cursor': 'point', 'background': '#ffffff' });
                  }
              }
              if ($(this).text() == "身份证") {
                  $(this).parents("td").next("td").find($(".txtZjhm")).attr("data-reg", "IDReg");
              } else {
                  $(this).parents("td").next("td").find($(".txtZjhm")).attr("data-reg", "zjNumReg");
              }
              //if (lassspan == "spanGfr") {
              //    var vals = $(this).parents(".jtcyxx").find(".spanGfr[data-value = 01]");
              //    if (vals.length > 2) {
              //        layer.msg("购房人不能超过两个！");
              //        $(this).parent().parent().children("span").text("否");
              //        $(this).parent().parent().children("span").attr("data-value", "02");
              //    }
              //}
              $(".downList").stop().slideUp(200);
              $(".arrow").find("img").removeClass("changeArrow");
              $(".arrow").find("img").addClass("changeArrow2");
          })
      }
    );

    //查询模拟下拉框
    $(".downSearch5>span,.downSearch5>.arrow").on('click', function (evt) {
        if (evt && evt.stopPropagation) {
            evt.stopPropagation();
        } else {
            evt.cancelBubble = true;
        }
        var vald = $(".spanJtlx").attr("data-value");
        if (vald != "01") {
            $(".downList").stop().slideUp(200);
            $(".arrow").find("img").removeClass("changeArrow");
            $(".arrow").find("img").addClass("changeArrow2");

            $(this).parent().find($(".downList")).stop().slideDown(200);
            $(this).parent().find($(".arrow")).find("img").removeClass("changeArrow2");
            $(this).parent().find($(".arrow")).find("img").addClass("changeArrow");
            $(this).parent().find($(".downList")).find("li").on('click', function () {
                $(this).parent(".downList").siblings("span").text($(this).text());
                $(this).parent(".downList").siblings("span").attr('data-value', $(this).attr('data-value'));
                $(".downList").stop().slideUp(200);
                $(".arrow").find("img").removeClass("changeArrow");
                $(".arrow").find("img").addClass("changeArrow2");
            })
        }
        else {

        }

    })
}

//填写意向信息页面
//判断新增时上一行内容是否填写
function checkAdd(obj) {
    var f = false;
    var jtlx = $(".spanJtlx").attr("data-value");
    var zfqk = $(".spanZfqk").attr("data-value");
    var hjszd = $("#txtHjszd").val().replace(/,/g, "%?/%").replace(/·/g, "%??%");
    var yxxm = $("#hidYxbh").val();
    if (jtlx == "00" || jtlx == "") {
        layer.msg("请选择购房家庭类型！");
        f = false;
        return f;
    } else {
        f = true;
    }
    if (zfqk == "" || zfqk == "00") {
        layer.msg("请选择家庭拥有住房情况！");
        f = false;
        return f;
    } else {
        f = true;
    }
    if (checkput(obj)) {
        var data = "";
        $(obj).find($("tr.trJtcy1,tr.trJtcy")).each(function () {
            var xm = $(this).find(".txtXm").val().replace(/·/g, "%??%");
            var gx = $(this).find(".spanGx").attr("data-value");
            if (gx == "00" || gx == "") {
                layer.msg("请选择家庭关系类型！");
                f = false;
                return f;
            } else {
                f = true;
            }
            var hk = $(this).find(".spanHk").attr("data-value");
            if (hk == "00" || hk == "") {
                layer.msg("请选择户口类型！");
                f = false;
                return f;
            } else {
                f = true;
            }
            var zjlx = $(this).find(".spanZjlx").attr("data-value");
            if (zjlx == "00" || zjlx == "") {
                layer.msg("请选择证件类型！");
                f = false;
                return f;
            } else {
                f = true;
            }
            var zjhm = $(this).find(".txtZjhm").val();
            var gfr = $(this).find(".spanGfr").attr("data-value");
            if (gfr == "00" || gfr == "") {
                layer.msg("请选择是否购房人！");
                f = false;
                return f;
            } else {
                f = true;
            }
            var hjrq = $(this).find(".txtHjrq").val();
            var ws = $(this).find(".spanWs").attr("data-value");
            if (ws == "00" || ws == "") {
                layer.msg("请选择是否外市迁入！");
                f = false;
                return f;
            } else {
                f = true;
            }
        })
        return f;
    }

}

function addJt() {
    layer.open({
        title: "",
        type: 1,
        skin: 'layui-layer-rim',
        area: ['570px', ''],
        closeBtn: 1,
        shadeClose: true, //点击遮罩关闭
        content: '\<\div style="padding:20px 40px;"><div class="mag_tb mag_t30" style="min-height:160px;">'
        + '<div class=fL><img src="resources/images/giveup.png"/></div><div class="fR size16 lh_30"'
        + ' style="width:380px;">您是否需要添加一组新的家庭做为共有人共同进行意向登记?</div>'
        + '<div class="clear"></div></div><div class="tc windowBtn"><span class="isInlineblock bgE05262 '
        + 'color_white size16 lh_40" style="width:120px;" onclick="addJtContent()">确定</span>'
        +'<span class="isInlineblock bgGray color_white size16 lh_40 mag_l10 w_120" onclick="layer.close(layer.index)">取消</span>'
        +'\<\/div>'
        + '\<\/div>'
    });

}
function addJtContent() {
    layer.close(layer.index);
    var $jtObj = $(".jtzxx");
    var jtzLength = $(".jtcyxx").length;
    if (jtzLength < 5) {
        $jtObj.append(djtTemplete.replace("{jtzgs}", jtzLength + 1).replace("{jtzTitle}", jtzLength + 1).replace("{jtzTitle1}", jtzLength + 1));
    } else {
        layer.msg("家庭最多添加5个！")
        return false;
    }
}
function scJt(obj) {
    var jtzgs = $(obj).parents(".jtcyxx").nextAll();
    var n;
    $.each(jtzgs, function () {
        var that = this;
        $(that).find("[data-jtz]").each(function () {
            $(this).attr("data-jtz", parseInt($(this).attr("data-jtz"), 10) - 1);
        })
        $(that).find(".jtzTitle").html("第<font class=\"color_e34156\">" + (parseInt($(that).find(".jtzTitle").attr("data-jtzxh"), 10) - 1) + "</font>组家庭");
        $(that).find(".jtzTitle").attr("data-jtzxh", parseInt($(that).find(".jtzTitle").attr("data-jtzxh"), 10) - 1);
    })
    $(obj).parents(".jtcyxx").remove();
}
//新增
function addJtcy(o) {
    obj = $(o).parents(".jtcyxx");
    if (checkAdd(obj)) {
        var jtcyL = $(obj).find($(".jtcy_xx tr"));
        if (jtcyL.length < 11) {
            var trCy;
            $(o).parents(".jtcyxx").find($("tr.trJtcy")).each(function (i) {
                if (i == 0) {
                    trCy = $(this).clone();
                }
            })
            $(trCy).attr("class", "trJtcy");
            $(trCy).find(".txtXm,.txtZjhm,.txtHjrq").val("");
            $(trCy).find(".txtXm,.txtZjhm").removeAttr("disabled");
            $(trCy).find(".spanGfr").attr("data-value", "00");
            $(trCy).find(".spanGfr").text("请选择");
            $(trCy).find(".spanGx").attr("data-value", "00");
            $(trCy).find(".spanGx").text("请选择");
            $(trCy).find(".spanHk").attr("data-value", "00");
            $(trCy).find(".spanHk").text("请选择");
            $(trCy).find(".spanWs").attr("data-value", "00");
            $(trCy).find(".spanWs").text("请选择");
            $(trCy).find(".spanZjlx").attr("data-value", "00");
            $(trCy).find(".spanZjlx").text("请选择");
            $(trCy).find(".spanGfr").parent().attr("class", "downSearch");
            $(trCy).find(".spandel").removeAttr("style");
            $(trCy).find(".spandel").removeClass("hide");
            if ($(trCy).find(".spanZjlx").text() == "身份证") {
                $(trCy).find(".txtZjhm").attr("data-reg", "IDReg");
            } else {
                $(trCy).find(".txtZjhm").attr("data-reg", "zjNumReg");
            }
            $(obj).find($(".jtcy_xx")).append($(trCy));
        }
        else {
            layer.msg("家庭成员最多添加10个！");
        }
    } else {
    }

};




//弹出一个页面层
function giveup() {
    $(".spanXmmc").text($('#hidXmmc').val());
    layer.open({
        title: "",
        type: 1,
        skin: 'layui-layer-rim',
        area: ['570px', ''],
        closeBtn: 1,
        shadeClose: true, //点击遮罩关闭
        content: $('.divGiveup')
    });
}

function xxqrload() {
    var djqxxz = data.qrxx;
    djqxxz = djqxxz.replace("{Clsj}", $("#hidClsj").val());
    djqxxz = djqxxz.replace("{Cldz}", $("#hidCldz").val());
    djqxxz = djqxxz.replace("{yxdjjssj}", $("#hidDjjssj").val());
    djqxxz = djqxxz.replace("{xfjssj}", $("#hidXfjssj").val());
    $(".specialTip").html(djqxxz);
    var msg = $("#hidMsg").val();
    if (msg.substring(0,2) == "1,") {
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            closeBtn: 1,
            area: ['570px', ''],
            shadeClose: true, //点击遮罩关闭
            content: '\<\div style="padding:20px 40px;">'
                         + '<div class="mag_t30">'
                              + '<div class=fL><img src="resources/images/giveup.png"/></div>'
                              + '<div class="fR size16 lh_40" style="width:380px;">' + msg.substring(2) + '</div>'
                              + '<div class="clear"></div>'
                         + '</div>'
                              + '<div class="tc" style="padding:20px 0px 15px 0px">'
                                   + '<span class="isInlineblock bgE05262 color_white size16 lh_40" style="width:120px;" onclick="layer.close(layer.index)">确定</span></div>'
                              + '\<\/div>'
        });
    }
    else if (msg == "9") {
        var yxxm = $("#hidYxxm").val();
        $(".hidClsj").text($('#hidClsj').val());
        $(".hidCldz").text($('#hidCldz').val());
        $(".hidLsh").text($('#hidSqlsh').val());
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: $(".cxdiv"),
            end: function () {
                window.location.href = "wdyxdjWaitPass.aspx";
            }
        });
    }
    else if (msg == "88") {
        var sjjg = $("#hidDayDjsj").val();
        var beginTime = parseInt(sjjg.split('-')[0]);
        var endTime = parseInt(sjjg.split('-')[1]);
        var tzdjts1 = tzdjts.replace("{#daydj_kssj}", beginTime * 1 > 9 ? beginTime : "0" + beginTime).replace("{#daydj_jssj}", endTime * 1 > 9 ? endTime : "0" + endTime)
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: tzdjts1,
            end: function () {
                window.location.href = "xmgs.aspx";
            }
        });
    }
    $(".textOverflow").each(function () {
        $(this).attr("title", $(this).text());
    })
    $("#hidMsg").val("");
}

function passload() {

    var djqxxz = data.qrxx;
    djqxxz = djqxxz.replace("{Clsj}", $("#hidClsj").val());
    djqxxz = djqxxz.replace("{Cldz}", $("#hidCldz").val());
    djqxxz = djqxxz.replace("{yxdjjssj}", $("#hidDjjssj").val());
    djqxxz = djqxxz.replace("{xfjssj}", $("#hidXfjssj").val());
    $(".specialTip").html(djqxxz);
    var msg = $("#hidMsg").val();

    if (msg == "7") {
        layer.close(layer.index);
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: '\<\div style="padding:20px 40px;"><div class="mag_tb mag_t30" style="min-height:160px;">'
            + '<div class=fL><img src="resources/images/giveup.png"/></div><div class="fR size16 lh_30"'
            + ' style="width:380px;">抱歉，您的<span class="weight700 mag_l5 mag_r5 wrap">' + $('#hidXmmc').val() + '</span>'
            + '摇号项目申请信息撤销失败！</div>'
            + '<div class="clear"></div></div><div class="tc windowBtn"><span class="isInlineblock bgE05262 '
            + 'color_white size16 lh_40" style="width:120px;" onclick="layer.close(layer.index)">确定</span></div>'
            + '\<\/div>',
            end: function () {
                window.location.href = 'index.html';
            }
        });
    }
    else if (msg == "88") {
        var sjjg = $("#hidDayDjsj").val();
        var beginTime = parseInt(sjjg.split('-')[0]);
        var endTime = parseInt(sjjg.split('-')[1]);
        var tzdjts1 = tzdjts.replace("{#daydj_kssj}", beginTime * 1 > 9 ? beginTime : "0" + beginTime).replace("{#daydj_jssj}", endTime * 1 > 9 ? endTime : "0" + endTime)
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: tzdjts1,
        });
    }
    else if (msg == "8") {
        layer.close(layer.index);
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 1,
            shadeClose: true, //点击遮罩关闭
            content: '\<\div style="padding:20px 40px;"><div class="mag_tb mag_t30" style="min-height:160px;">'
            + '<div class=fL><img src="resources/images/success.png"/></div><div class="fR size16 lh_30"'
            + ' style="width:380px;">您的<span class="weight700 mag_l5 mag_r5 wrap">' + $('#hidXmmc').val() + '</span>'
            + '摇号项目申请信息撤销成功！</div>'
            + '<div class="clear"></div></div><div class="tc windowBtn"><span class="isInlineblock bgE05262 '
            + 'color_white size16 lh_40" style="width:120px;" onclick="layer.close(layer.index)">确定</span></div>'
            + '\<\/div>',
            end: function () {
                window.location.href = "index.html";
            }
        });
    }
    $("#hidMsg").val('');

    $(".textOverflow").each(function () {
        $(this).attr("title", $(this).text());
    })
}

function setpassLoad() {
    document.onkeydown = function (event) {
        if (event.keyCode == 32) {
            return false;
        }
    }
    $("#txtPassword,#txtVPassword").val("");
    var msg = $("#hidMsg").val();
    if (msg == "1") {
        $("#form1").removeClass("registerform");
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 0,
            shadeClose: false, //点击遮罩关闭
            content: $(".mmxgcg")
        });
    }
    else if (msg.indexOf("2") > -1) {
        var xmmc = msg.substring(2);
        layer.open({
            title: "",
            type: 1,
            skin: 'layui-layer-rim',
            area: ['570px', ''],
            closeBtn: 0,
            shadeClose: false, //点击遮罩关闭
            content: '\<\div style="padding:20px 40px;"><div class="mag_tb mag_t30" style="min-height:160px;">'
            + '<div class=fL><img src="resources/images/giveup.png"/></div><div class="fR size18 lh_40"'
            + ' style="width:380px;">您正在意向登记的<span class="weight700 mag_l5 mag_r5 wrap">' + xmmc + '</span>项目选房暂未结束，请在选房结束后再登记其他项目！</div>'
            + '<div class="clear"></div></div><div class="tc windowBtn"><span class="isInlineblock bgE05262 '
            + 'color_white size16 lh_40" style="width:120px;" onclick="layer.close(layer.index)">查看我的登记</span></div>'
            + '\<\/div>',
            end: function () {
                window.location.href = "wdyxdjWaitPass.aspx";
            }
        });
    }
    else if (msg.substring(0, 1) == "0") {
        layer.msg(msg.substring(3));
    }
    $("#hidMsg").val("");
    var getInfoObj = function () {
        return $(this).parents(".checkinput").next().find(".info");
    }
    $("[datatype]").focusin(function () {
        if (this.timeout) { clearTimeout(this.timeout); }
        var infoObj = getInfoObj.call(this);
        if (infoObj.siblings(".Validform_right").length != 0) {
            return;
        }
        infoObj.show().siblings().hide();

    }).focusout(function () {
        var infoObj = getInfoObj.call(this);
        this.timeout = setTimeout(function () {
            infoObj.hide().siblings(".Validform_wrong,.Validform_loading,.Validform_right").show();;
        }, 0);
    });
    $(".registerform").Validform({
        tiptype: 2
    });

}